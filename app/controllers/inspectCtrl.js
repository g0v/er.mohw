/*! grafana - v1.7.0 - 2014-08-16
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["angular","lodash"],function(a,b){var c=a.module("grafana.controllers");c.controller("InspectCtrl",["$scope",function(a){function c(a){for(var b=[],c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");e[1].length>0&&b.push({key:e[0],value:window.unescape(e[1])})}return b}var d=a.inspector;a.init=function(){a.editor={index:0},d.error&&(b.isString(d.error.data)&&(a.response=d.error.data),d.error.config&&d.error.config.params&&(a.request_parameters=b.map(d.error.config.params,function(a,b){return{key:b,value:a}})),d.error.stack?(a.editor.index=2,a.stack_trace=d.error.stack,a.message=d.error.message):d.error.config&&d.error.config.data&&(a.editor.index=1,a.request_parameters=c(d.error.config.data),-1!==d.error.data.indexOf("DOCTYPE")&&(a.response_html=d.error.data)))}}]),a.module("grafana.directives").directive("iframeContent",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.iframeContent),f=e(b);b.$on("$destroy",function(){c.remove()});var g=document.createElement("iframe");g.width="100%",g.height="400px",g.style.border="none",g.src="about:blank",c.append(g),g.contentWindow.document.open("text/html","replace"),g.contentWindow.document.write(f),g.contentWindow.document.close()}}}])});