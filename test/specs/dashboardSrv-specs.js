/*! grafana - v1.7.0-rc1 - 2014-08-10
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["services/dashboard/dashboardSrv"],function(){describe("when creating new dashboard with defaults only",function(){var a;beforeEach(module("grafana.services")),beforeEach(inject(function(b){a=b.create({})})),it("should have title",function(){expect(a.title).to.be("No Title")}),it("should have default properties",function(){expect(a.rows.length).to.be(0),expect(a.nav.length).to.be(1),expect(a.pulldowns.length).to.be(2)})}),describe("when creating dashboard with old schema",function(){var a,b;beforeEach(module("grafana.services")),beforeEach(inject(function(c){a=c.create({services:{filter:{time:{from:"now-1d",to:"now"},list:[1]}},rows:[{panels:[{type:"graphite",legend:!0,grid:{min:1,max:10}}]}]}),b=a.rows[0].panels[0]})),it("should have title",function(){expect(a.title).to.be("No Title")}),it("should move time and filtering list",function(){expect(a.time.from).to.be("now-1d"),expect(a.templating.list[0]).to.be(1)}),it("graphite panel should change name too graph",function(){expect(b.type).to.be("graph")}),it("update legend setting",function(){expect(b.legend.show).to.be(!0)}),it("update grid options",function(){expect(b.grid.leftMin).to.be(1),expect(b.grid.leftMax).to.be(10)}),it("dashboard schema version should be set to latest",function(){expect(a.version).to.be(2)})})});